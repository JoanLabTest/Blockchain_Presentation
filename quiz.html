<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://unpkg.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://unpkg.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; img-src 'self' data: https:; connect-src 'self';">

    <!-- METADATA & FAVICON -->
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2091/2091665.png" type="image/png">
    <meta name="theme-color" content="#020617">
    <meta property="og:title" content="Certification DCM Digital - Jusqu'√† 45 Questions">
    <meta property="og:description"
        content="Quiz de certification professionnel couvrant tous les modules blockchain banking.">

    <title>Certification DCM Digital - Jusqu'√† 45 Questions</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Urbanist:wght@300;400;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        /* --- CONFIGURATION DESIGN --- */
        :root {
            --bg-dark: #020617;
            --bg-card: #1e293b;
            --text-main: #e2e8f0;
            --text-muted: #94a3b8;
            --accent-blue: #3b82f6;
            --accent-green: #10b981;
            --accent-gold: #f59e0b;
            --accent-red: #ef4444;
            --accent-purple: #a855f7;
            --border: #334155;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg-dark);
            font-family: 'Urbanist', sans-serif;
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* --- NAVIGATION --- */
        .navbar {
            height: 70px;
            background: rgba(15, 23, 42, 0.95);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
        }

        .nav-logo {
            font-weight: 800;
            font-size: 20px;
            color: white;
        }

        .back-btn {
            text-decoration: none;
            color: var(--text-muted);
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: 0.3s;
        }

        .back-btn:hover {
            color: var(--accent-blue);
        }

        /* --- QUIZ CONTAINER --- */
        .quiz-wrapper {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .quiz-card {
            width: 100%;
            max-width: 900px;
            background: var(--bg-card);
            border-radius: 24px;
            border: 1px solid var(--border);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            position: relative;
            min-height: 600px;
            display: flex;
            flex-direction: column;
        }

        /* CERTIFICATION DASHBOARD (ACCUEIL) */
        .certif-dashboard {
            padding: 40px;
            text-align: center;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .level-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 40px;
            width: 100%;
        }

        .level-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border);
            border-radius: 20px;
            padding: 30px;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .level-card:hover:not(.locked) {
            border-color: var(--accent-blue);
            transform: translateY(-5px);
            background: rgba(59, 130, 246, 0.1);
        }

        .level-card.locked {
            opacity: 0.6;
            cursor: not-allowed;
            filter: grayscale(1);
        }

        .level-icon {
            font-size: 50px;
            margin-bottom: 20px;
            color: var(--text-muted);
        }

        .level-card.unlocked .level-icon {
            color: var(--accent-green);
        }

        .level-card.active-level .level-icon {
            color: var(--accent-blue);
        }

        .tag-status {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 12px;
            font-weight: bold;
            padding: 4px 10px;
            border-radius: 20px;
        }

        .tag-open {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .tag-locked {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .tag-passed {
            background: #10b981;
            color: white;
        }

        /* HEADER QUIZ */
        .quiz-header {
            padding: 30px 40px;
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid var(--border);
            display: none;
            /* Cach√© au d√©but */
            justify-content: space-between;
            align-items: center;
        }

        .progress-track {
            width: 250px;
            height: 8px;
            background: var(--bg-dark);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));
            width: 0%;
            transition: width 0.5s;
        }

        .category-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        /* CONTENT */
        .quiz-content {
            padding: 40px;
            flex-grow: 1;
            display: none;
            /* Cach√© au d√©but */
            flex-direction: column;
            justify-content: center;
        }

        h2 {
            font-size: 28px;
            margin-bottom: 30px;
            line-height: 1.4;
            color: white;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .option-btn {
            background: var(--bg-dark);
            border: 2px solid var(--border);
            padding: 20px;
            border-radius: 12px;
            color: var(--text-main);
            text-align: left;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.2s;
            position: relative;
        }

        .option-btn:hover {
            border-color: var(--accent-blue);
            transform: translateY(-2px);
        }

        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        /* FEEDBACK STATES */
        .option-btn.correct {
            border-color: var(--accent-green);
            background: rgba(16, 185, 129, 0.1);
            color: var(--accent-green);
        }

        .option-btn.wrong {
            border-color: var(--accent-red);
            background: rgba(239, 68, 68, 0.1);
            color: var(--accent-red);
        }

        .feedback-box {
            margin-top: 30px;
            padding: 20px;
            border-radius: 12px;
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid var(--accent-blue);
            display: none;
            animation: slideIn 0.3s;
        }

        .feedback-box.show {
            display: block;
        }

        /* NEXT BUTTON */
        .next-btn {
            margin-top: 30px;
            padding: 15px 40px;
            background: var(--accent-blue);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
            align-self: flex-end;
            display: none;
        }

        .next-btn:hover {
            background: #2563eb;
        }

        /* RESULT SCREEN */
        .result-screen {
            text-align: center;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding: 40px;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 5px solid var(--accent-green);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            font-weight: 800;
            color: white;
            margin-bottom: 30px;
            background: rgba(16, 185, 129, 0.1);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .level-grid {
                grid-template-columns: 1fr;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>

    <nav class="navbar">
        <div class="nav-logo">
            <i class="fa-solid fa-graduation-cap" style="color: var(--accent-gold);"></i> CERTIFICATION <span
                style="color:var(--accent-gold)">DCM</span>
        </div>
        <a href="index.html" class="back-btn"><i class="fa-solid fa-arrow-left"></i> Retour au Cours</a>
    </nav>

    <div class="quiz-wrapper">
        <div class="quiz-card">

            <!-- DASHBOARD DE CERTIFICATION (Ecran Accueil) -->
            <div class="certif-dashboard" id="certifDashboard">
                <i class="fas fa-certificate"
                    style="font-size: 60px; color: var(--accent-gold); margin-bottom: 20px;"></i>
                <h1 style="font-size: 32px; color: white; margin-bottom: 10px;">Centre de Certification</h1>
                <p style="color: var(--text-muted);">Validez vos acquis √† travers deux niveaux de difficult√©. Le niveau
                    Expert n√©cessite 80% de r√©ussite aux Fondamentaux.</p>

                <div class="level-grid">
                    <!-- NIVEAU 1 -->
                    <div class="level-card active-level" onclick="startLevel(1)">
                        <div class="tag-status tag-open" id="tagLvl1">OUVERT</div>
                        <i class="fas fa-layer-group level-icon"></i>
                        <h3 style="color:white; font-size: 20px; margin-bottom:10px;">Niveau 1 : Fondamentaux</h3>
                        <p style="font-size:14px; color: var(--text-muted);">Concepts cl√©s, Blockchain, Wallets, Smart
                            Contracts.</p>
                        <hr style="border:0; border-top:1px solid rgba(255,255,255,0.1); margin:15px 0;">
                        <span style="color: #3b82f6; font-weight:bold; font-size:14px;">20 Questions</span>
                    </div>

                    <!-- NIVEAU 2 -->
                    <div class="level-card locked" id="cardLvl2" onclick="startLevel(2)">
                        <div class="tag-status tag-locked" id="tagLvl2">VERROUILL√â üîí</div>
                        <i class="fas fa-crown level-icon"></i>
                        <h3 style="color:white; font-size: 20px; margin-bottom:10px;">Niveau 2 : Expert</h3>
                        <p style="font-size:14px; color: var(--text-muted);">R√©gulation (MiCA, eWpG), Infrastructure
                            T+0, RWA.</p>
                        <hr style="border:0; border-top:1px solid rgba(255,255,255,0.1); margin:15px 0;">
                        <span style="color: #a855f7; font-weight:bold; font-size:14px;">25 Questions</span>
                    </div>
                </div>
            </div>

            <!-- HEADER (Score & Progress) -->
            <div class="quiz-header" id="quizHeader">
                <div style="font-family: 'JetBrains Mono'; color: var(--accent-gold);">
                    <span id="levelTitle">Niveau 1</span> ‚Ä¢ Question <span id="qCurrent">1</span>/20
                </div>
                <div class="progress-track">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
            </div>

            <!-- QUESTION SCREEN -->
            <div class="quiz-content" id="questionScreen">
                <div id="categoryBadge" class="category-badge"></div>
                <h2 id="questionText">Chargement...</h2>

                <div class="options-grid" id="optionsContainer">
                    <!-- JS generated -->
                </div>

                <div class="feedback-box" id="feedback">
                    <strong id="feedbackTitle">Explication :</strong>
                    <p id="feedbackText" style="margin-top: 5px; color: var(--text-muted); font-size: 15px;"></p>
                </div>

                <button class="next-btn" id="nextBtn" onclick="nextQuestion()">Question Suivante <i
                        class="fa-solid fa-arrow-right"></i></button>
            </div>

            <!-- RESULT SCREEN -->
            <div class="result-screen" id="resultScreen">
                <div class="score-circle" id="finalScore">0%</div>
                <h1 id="finalRank">Titre</h1>
                <p id="finalMessage"
                    style="font-size: 18px; color: var(--text-muted); max-width: 600px; margin-bottom: 30px;"></p>

                <div style="display: flex; gap: 20px; margin-top: 20px;">
                    <button onclick="location.reload()"
                        style="padding: 15px 30px; background: transparent; border: 1px solid var(--text-muted); color: white; border-radius: 50px; cursor: pointer; font-weight: bold;">Retour
                        au Centre</button>
                    <a href="index.html"
                        style="padding: 15px 30px; background: var(--accent-blue); color: white; border-radius: 50px; text-decoration: none; font-weight: bold;">Quitter</a>
                </div>
            </div>

        </div>
    </div>

    <script>
        /* --- QUESTION BANK --- */

        // --- NIVEAU 1 : FONDAMENTAUX (20 Questions) ---
        const questionsEasy = [
            { q: "Quelle est la d√©finition fondamentale d'une Blockchain ?", options: ["Une crypto-monnaie", "Un registre distribu√© partag√© et immuable", "Un serveur centralis√©", "Un Cloud"], a: 1, category: "Fondamentaux", info: "C'est un DLT (Distributed Ledger) partag√© entre tous les participants." },
            { q: "Qu'est-ce qu'une cl√© priv√©e ?", options: ["Un mot de passe oubli√©", "La signature num√©rique qui autorise les transactions", "L'adresse IBAN du wallet", "Un code PIN"], a: 1, category: "Fondamentaux", info: "La cl√© priv√©e signe cryptographiquement les transactions. Elle ne doit jamais √™tre partag√©e." },
            { q: "Qu'est-ce qu'un Smart Contract ?", options: ["Un contrat papier scan√©", "Un programme auto-ex√©cutable sur la blockchain", "Une loi num√©rique", "Un accord verbal"], a: 1, category: "Fondamentaux", info: "C'est du code 'If This Then That' qui s'ex√©cute automatiquement sans tiers de confiance." },
            { q: "Quelle est la diff√©rence entre Coin et Token ?", options: ["Aucune", "Le Coin a sa propre Blockchain, le Token est cr√©√© sur une cha√Æne existante", "Le Token est physique", "Le Coin est moins cher"], a: 1, category: "Fondamentaux", info: "Bitcoin est un Coin (Blockchain Bitcoin). USDC est un Token (sur Ethereum)." },
            { q: "Qu'est-ce que le 'Gas' sur Ethereum ?", options: ["Du carburant fossile", "Les frais de transaction pay√©s aux validateurs", "Une erreur syst√®me", "Un token de jeu"], a: 1, category: "Fondamentaux", info: "Le Gas r√©mun√®re les n≈ìuds qui calculent et valident la transaction." },
            { q: "Que signifie 'DeFi' ?", options: ["D√©finition Financi√®re", "Finance D√©centralis√©e", "Dette Financi√®re", "D√©partement Fiscal"], a: 1, category: "Web3 Basics", info: "Finance sans interm√©diaires bancaires classiques, bas√©e sur des Smart Contracts." },
            { q: "Qu'est-ce qu'un Stablecoin ?", options: ["Une crypto tr√®s volatile", "Un token dont la valeur est stable (ex: 1‚Ç¨)", "Un Bitcoin", "Une action"], a: 1, category: "Web3 Basics", info: "Il sert de refuge contre la volatilit√©, souvent adoss√© au Dollar ou √† l'Euro." },
            { q: "√Ä quoi sert un Wallet (Portefeuille) ?", options: ["Stocker des billets", "G√©rer ses cl√©s priv√©es et interagir avec la blockchain", "Stocker des PDF", "Payer sur Amazon"], a: 1, category: "Fondamentaux", info: "Le Wallet ne contient pas les cryptos (qui sont sur la blockchain) mais les cl√©s pour y acc√©der." },
            { q: "Qu'est-ce qu'un NFT ?", options: ["Non-Fungible Token (Unique)", "New French Technology", "Network File Transfer", "Un virus"], a: 0, category: "Web3 Basics", info: "Un token unique repr√©senant un actif sp√©cifique (Art, Titre de propri√©t√©) non interchangeable." },
            { q: "Qu'est-ce que le 'Mining' ou 'Staking' ?", options: ["Chercher de l'or", "Le processus de validation des blocs et s√©curisation du r√©seau", "Pirater un serveur", "Installer un logiciel"], a: 1, category: "Fondamentaux", info: "C'est le m√©canisme de consensus qui s√©curise le r√©seau d√©centralis√©." },
            { q: "Pourquoi dit-on que la Blockchain est 'Trustless' ?", options: ["On ne peut faire confiance √† personne", "Pas besoin de confiance en un tiers central pour op√©rer", "C'est dangereux", "C'est anonyme"], a: 1, category: "Fondamentaux", info: "Le syst√®me remplace la confiance humaine (Banque) par la v√©rification math√©matique." },
            { q: "Quel est l'avantage du T+0 ?", options: ["Aucun", "R√®glement instantan√©", "Paiement en 30 jours", "Moins de taxes"], a: 1, category: "March√©s", info: "Le T+0 √©limine le risque de contrepartie pendant les 2 jours de d√©lai habituels." },
            { q: "Qu'est-ce qu'un Security Token ?", options: ["Un jeton de s√©curit√© informatique", "La repr√©sentation num√©rique d'un instrument financier (Action, Obligation)", "Un mot de passe", "Un jeu vid√©o"], a: 1, category: "R√©gulation", info: "C'est un actif financier r√©glement√© √©mis sur Blockchain." },
            { q: "Que signifie 'DvP' ?", options: ["Delivery vs Payment", "Data vs Processing", "Debt vs Profit", "Digital vs Paper"], a: 0, category: "March√©s", info: "Livraison contre Paiement : l'√©change simultan√© du titre et du cash." },
            { q: "Qu'est-ce qu'une Blockchain Publique ?", options: ["Un r√©seau ouvert √† tous (ex: Bitcoin, Ethereum)", "Un r√©seau r√©serv√© aux banques", "Un site web public", "Un wifi public"], a: 0, category: "Fondamentaux", info: "N'importe qui peut lire et √©crire (sous condition de frais) sur une cha√Æne publique." },
            { q: "Qu'est-ce qu'une Blockchain Priv√©e/Consortium ?", options: ["Un r√©seau secret", "Un r√©seau √† acc√®s restreint et permissionn√© (ex: SWIAT)", "Le Dark Web", "Un VPN"], a: 1, category: "Fondamentaux", info: "L'acc√®s aux n≈ìuds et √† la validation est contr√¥l√© par une autorit√© ou un groupe." },
            { q: "Que permet la tokenisation ?", options: ["De cr√©er des jetons de casino", "De fractionner et rendre liquide des actifs illiquides", "D'imprimer des billets", "De supprimer les banques"], a: 1, category: "March√©s", info: "Elle permet de diviser un immeuble ou une dette en milliers de parts √©changeables 24/7." },
            { q: "Qu'est-ce qu'un Oracle dans le Web3 ?", options: ["Une pr√©dication", "Un service qui apporte des donn√©es du monde r√©el (ex: Prix) √† la Blockchain", "Un logiciel de base de donn√©es", "Un dieu grec"], a: 1, category: "Technique", info: "Les Smart Contracts ne voient pas l'ext√©rieur. Les Oracles (ex: Chainlink) leur livrent les donn√©es." },
            { q: "Quelle est la principale devise utilis√©e en DeFi ?", options: ["L'Euro papier", "Les Stablecoins (USDC, USDT)", "L'Or", "Les actions Apple"], a: 1, category: "Web3 Basics", info: "Les Stablecoins sont le carburant de la DeFi pour √©viter la volatilit√©." },
            { q: "Qu'est-ce que l'Interop√©rabilit√© ?", options: ["La capacit√© des blockchains √† communiquer entre elles", "Un syst√®me d'exploitation", "Une panne r√©seau", "Un c√¢ble internet"], a: 0, category: "Technique", info: "C'est l'enjeu majeur : faire circuler des actifs d'Ethereum vers d'autres r√©seaux." }
        ];

        // --- NIVEAU 2 : EXPERT (20 Questions - Locking Condition) ---
        const questionsExpert = [
            { q: "Quelle loi allemande de 2021 a supprim√© l'obligation du certificat global papier ?", options: ["MiCA", "eWpG (Elektronische Wertpapiergesetz)", "RGPD", "B√¢le III"], a: 1, category: "R√©gulation", info: "L'eWpG a cr√©√© le cadre l√©gal pour les 'Crypto Securities' en Allemagne." },
            { q: "Qu'est-ce que la solution 'Trigger' de la Bundesbank ?", options: ["Un pistolet", "Une passerelle technique liant Blockchain et Target2 pour le r√®glement Cash", "Un Stablecoin", "Un Smart Contract"], a: 1, category: "Infra Bancaire", info: "Elle permet de r√©gler la jambe Cash en monnaie banque centrale (CeBM) sans tokeniser l'Euro." },
            { q: "Qu'est-ce que le r√©gime pilote DLT (Pilot Regime) ?", options: ["Un cours de pilotage", "Un bac √† sable r√©glementaire europ√©en pour les infrastructures de march√© DLT", "Une loi am√©ricaine", "Un logiciel de test"], a: 1, category: "R√©gulation", info: "Il permet aux infrastructures (TSS) d'op√©rer avec des exemptions temporaires aux r√®gles CSDR/MiFID." },
            { q: "Dans une √©mission 'Direct to Investor', quel interm√©diaire dispara√Æt ?", options: ["L'√©metteur", "Le CSD (D√©positaire Central) et le Custodian Global", "L'investisseur", "La blockchain"], a: 1, category: "Flux", info: "La tenue de registre est partag√©e sur la Blockchain, rendant le CSD central obsol√®te pour la conservation." },
            { q: "Qu'est-ce que l'Atomic Settlement ?", options: ["Un r√®glement nucl√©aire", "L'√©change instantan√© et ins√©cable Titre/Cash", "Un r√®glement manuel", "Un virement diff√©r√©"], a: 1, category: "Flux", info: "Si le Cash manque, le Titre ne part pas. Le risque de d√©faut est math√©matiquement nul." },
            { q: "Quel est le r√¥le du 'Registrar' sur une blockchain permissionn√©e ?", options: ["Aucun", "Il tient le registre officiel et whiteliste les investisseurs", "Il mine des bitcoins", "Il vend les tokens"], a: 1, category: "R√©gulation", info: "Le Registrar (souvent la banque) a la responsabilit√© l√©gale de la tenue de compte et du KYC." },
            { q: "Que signifie 'DORA' dans le contexte bancaire ?", options: ["L'exploratrice", "Digital Operational Resilience Act", "Data Of Real Assets", "Direct Online Risk Analysis"], a: 1, category: "R√©gulation", info: "R√®glement europ√©en imposant des normes strictes de r√©silience informatique et cybers√©curit√©." },
            { q: "Qu'est-ce que SWIAT ?", options: ["Un code SWIFT", "Une blockchain bancaire priv√©e cr√©√©e par DekaBank", "Une crypto-monnaie", "Une loi"], a: 1, category: "Infrastructure", info: "SWIAT est une infrastructure de march√© s√©curis√©e pour l'√©mission de titres digitaux." },
            { q: "Comment les coupons sont-ils pay√©s sur un Digital Bond ?", options: ["Par ch√®que", "Automatiquement par Smart Contract (Corporate Action)", "Manuellement par fax", "Jamais"], a: 1, category: "Smart Asset Servicing", info: "Le code calcule et distribue les int√©r√™ts aux adresses des d√©tenteurs √† l'instant T." },
            { q: "Qu'est-ce que le standard ERC-3643 ?", options: ["Un robot", "Un standard de token pour les titres permissionn√©s (T-REX)", "Une erreur", "Un stablecoin"], a: 1, category: "Technique", info: "Ce standard ajoute une couche d'identit√© (ONCHAINID) pour v√©rifier l'√©ligibilit√© avant chaque transfert." },
            { q: "Qu'est-ce que la solution Canton Network ?", options: ["Une blockchain chinoise", "Un r√©seau de 'Global Synchronization' pour l'interop√©rabilit√© institutionnelle", "Un canton suisse", "Un VPN"], a: 1, category: "Infrastructure", info: "Canton (Digital Asset) connecte des applications Daml avec une confidentialit√© totale (Privacy)." },
            { q: "Pourquoi les USA privil√©gient-ils les blockchains priv√©es ?", options: ["Ils n'aiment pas Ethereum", "Pour la confidentialit√© stricte des donn√©es (Privacy Rules)", "Pour la vitesse", "Par habitude"], a: 1, category: "March√©s", info: "La transparence totale d'Ethereum est souvent incompatible avec le secret bancaire am√©ricain." },
            { q: "Qu'est-ce qu'un CASP selon MiCA ?", options: ["Crypto-Asset Service Provider", "Central Authority Service Point", "Computer Anti-Spam Program", "Un fant√¥me"], a: 0, category: "R√©gulation", info: "Les prestataires de services sur actifs num√©riques (PSAN) deviennent des CASP r√©gul√©s." },
            { q: "Quelle est la diff√©rence entre CeBM et CoBM ?", options: ["Aucune", "Central Bank Money (S√ªr) vs Commercial Bank Money (Risque Banque)", "Cash vs Crypto", "Coins vs Bills"], a: 1, category: "Flux", info: "Le CeBM est la monnaie ultime sans risque. Le CoBM est une cr√©ance sur une banque commerciale." },
            { q: "Qu'est-ce que le repacking RWA ?", options: ["Refaire ses valises", "Mettre des actifs r√©els dans un SPV pour √©mettre des tokens", "Vendre des cartons", "Une fraude"], a: 1, category: "RWA & DeFi", info: "On isole juridiquement des actifs (ex: obligations, immo) pour √©mettre des droits num√©riques dessus." },
            { q: "Qu'est-ce qu'un 'ZKP' (Zero Knowledge Proof) ?", options: ["Une preuve que je ne sais rien", "Une preuve cryptographique permettant de valider sans r√©v√©ler la donn√©e", "Un bug", "Un mot de passe"], a: 1, category: "Technique Avanc√©e", info: "Fondamental pour la privacy : prouver que j'ai les fonds sans montrer mon solde." },
            { q: "Qu'est-ce qu'un 'Liquidity Pool' en DeFi ?", options: ["Une piscine", "Un amas de fonds bloqu√©s dans un contrat pour permettre les √©changes (AMM)", "Une banque centrale", "Un pr√™t"], a: 1, category: "RWA & DeFi", info: "Les utilisateurs d√©posent des paires d'actifs pour permettre le trading d√©centralis√©." },
            { q: "Quel est l'impact de la Blockchain sur le Collat√©ral ?", options: ["Aucun", "Mobilit√© instantan√©e du collat√©ral (HQLA) 24/7", "√áa le rend ill√©gal", "√áa co√ªte plus cher"], a: 1, category: "RWA & DeFi", info: "Le collat√©ral tokenis√© peut √™tre d√©plac√© instantan√©ment d'un custodian √† un autre pour couvrir un appel de marge." },
            { q: "Qu'est-ce que l'Intraday Repo ?", options: ["Une sieste", "Un pr√™t court terme (quelques heures) rendu possible par la vitesse Blockchain", "Un rapport", "Un repo sur 10 ans"], a: 1, category: "Flux", info: "La pr√©cision T+0 permet d'emprunter du cash pour quelques heures seulement." },
            { q: "Que signifie 'Mint' et 'Burn' dans le cycle de vie ?", options: ["Menthe et Br√ªlure", "√âmission (Cr√©ation) et Remboursement (Destruction) des titres", "Achat et Vente", "Profit et Perte"], a: 1, category: "Cycle de vie", info: "√Ä l'√©mission, on 'Mint' les tokens. √Ä l'√©ch√©ance, apr√®s remboursement, on les 'Burn'." },
            { q: "Quel fons tokenis√© de BlackRock a d√©pass√© les 500M$ en 2024 ?", options: ["BUIDL", "IBIT", "USDC", "DeFi Fund"], a: 0, category: "RWA & DeFi", info: "Le fonds BUIDL de BlackRock permet aux institutionnels de d√©tenir du cash tokenis√© rapportant des int√©r√™ts (Money Market)." },
            { q: "Qu'est-ce que la 'Permissioned DeFi' (ex: Aave Arc) ?", options: ["DeFi ill√©gale", "Des pools de liquidit√© r√©serv√©es aux acteurs KYC/AML (Whitelisted)", "Un mode test", "Une crypto priv√©e"], a: 1, category: "RWA & DeFi", info: "Cela permet aux banques d'utiliser les protocoles DeFi tout en respectant les contraintes de conformit√© (Compliance)." },
            { q: "Quel est l'avantage de la 'Composabilit√©' des RWA ?", options: ["Aucun", "On peut utiliser un token (ex: Bond) comme collat√©ral dans un autre protocole automatiquement", "C'est plus compliqu√©", "C'est artistique"], a: 1, category: "RWA & DeFi", info: "Un actif tokenis√© peut √™tre utilis√© comme une brique LEGO dans d'autres applications financi√®res (Pr√™t, D√©riv√©s) sans friction." },
            { q: "Quelle est la diff√©rence entre une CBDC de Gros (Wholesale) et de D√©tail ?", options: ["La taille", "Gros pour les banques (R√®glement Interbancaire), D√©tail pour le public (Monnaie num√©rique)", "Aucune", "La couleur"], a: 1, category: "R√©gulation", info: "La MNBC de Gros vise √† s√©curiser les r√®glements de titres (DvP) en monnaie centrale." },
            { q: "Qu'est-ce qu'un HQLA (High Quality Liquid Asset) tokenis√© ?", options: ["Un actif liquide de haute qualit√© d√©pla√ßable instantan√©ment (ex: Bon du Tr√©sor)", "De l'eau", "Un token sans valeur", "Un cr√©dit"], a: 0, category: "RWA & DeFi", info: "La tokenisation permet d'utiliser ces actifs comme collat√©ral mobile 24/7 pour optimiser la liquidit√©." }
        ];

        // --- GAME LOGIC ---
        let currentLevel = 1;
        let currentQuestions = [];
        let currentQIndex = 0;
        let score = 0;
        let categoryScores = {};

        const ui = {
            dashboard: document.getElementById('certifDashboard'),
            quizHeader: document.getElementById('quizHeader'),
            content: document.getElementById('questionScreen'),
            result: document.getElementById('resultScreen'),
            levelTitle: document.getElementById('levelTitle'),
            qCurrent: document.getElementById('qCurrent'),
            questionText: document.getElementById('questionText'),
            options: document.getElementById('optionsContainer'),
            feedbackBox: document.getElementById('feedback'),
            feedbackText: document.getElementById('feedbackText'),
            nextBtn: document.getElementById('nextBtn'),
            progressBar: document.getElementById('progressBar')
        };

        // CHECK UNLOCK STATUS ON LOAD
        window.onload = function () {
            const unlocked = localStorage.getItem('quiz_level_1_passed');
            if (unlocked === 'true') {
                const cardLvl2 = document.getElementById('cardLvl2');
                const tagLvl2 = document.getElementById('tagLvl2');
                cardLvl2.classList.remove('locked');
                cardLvl2.classList.add('unlocked');
                tagLvl2.classList.remove('tag-locked');
                tagLvl2.classList.add('tag-open');
                tagLvl2.innerText = "D√âVERROUILL√â";
            }
        };

        function startLevel(level) {
            // Check Lock
            if (level === 2) {
                const unlocked = localStorage.getItem('quiz_level_1_passed');
                if (unlocked !== 'true') return; // Do nothing if locked
            }

            currentLevel = level;
            currentQuestions = (level === 1) ? questionsEasy : questionsExpert;
            currentQIndex = 0;
            score = 0;
            categoryScores = {};

            // Init Scores
            currentQuestions.forEach(q => {
                if (!categoryScores[q.category]) categoryScores[q.category] = { correct: 0, total: 0 };
                categoryScores[q.category].total++;
            });

            // UI Switch
            ui.dashboard.style.display = 'none';
            ui.quizHeader.style.display = 'flex';
            ui.content.style.display = 'flex';
            ui.levelTitle.innerText = (level === 1) ? "Niveau 1 : Fondamentaux" : "Niveau 2 : M√©canique Expert";

            loadQuestion();
        }

        function loadQuestion() {
            const q = currentQuestions[currentQIndex];

            // UI Updates
            ui.qCurrent.innerText = currentQIndex + 1;
            ui.progressBar.style.width = ((currentQIndex) / currentQuestions.length * 100) + "%";

            document.getElementById('categoryBadge').innerText = q.category;

            // Text
            ui.questionText.innerText = q.q;
            ui.options.innerHTML = "";
            ui.feedbackBox.classList.remove('show');
            ui.nextBtn.style.display = "none";

            // Options
            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = opt;
                btn.onclick = () => selectAnswer(index, btn);
                ui.options.appendChild(btn);
            });
        }

        function selectAnswer(index, btn) {
            const q = currentQuestions[currentQIndex];
            const isCorrect = (index === q.a);

            // Disable all
            const allBtns = document.querySelectorAll('.option-btn');
            allBtns.forEach(b => b.classList.add('disabled'));

            if (isCorrect) {
                btn.classList.add('correct');
                score++;
                categoryScores[q.category].correct++;
            } else {
                btn.classList.add('wrong');
                allBtns[q.a].classList.add('correct');
            }

            // Feedback
            ui.feedbackText.innerText = q.info;
            ui.feedbackBox.classList.add('show');
            ui.nextBtn.style.display = "block";

            // End Check
            if (currentQIndex === currentQuestions.length - 1) {
                ui.nextBtn.innerHTML = 'Voir R√©sultats <i class="fa-solid fa-trophy"></i>';
                ui.nextBtn.onclick = showResults;
            }
        }

        function nextQuestion() {
            currentQIndex++;
            loadQuestion();
        }

        function showResults() {
            ui.quizHeader.style.display = 'none';
            ui.content.style.display = 'none';
            ui.result.style.display = 'flex';

            const percentage = Math.round((score / currentQuestions.length) * 100);
            const passed = percentage >= 80;

            const finalScoreEl = document.getElementById('finalScore');
            const finalRankEl = document.getElementById('finalRank');
            const finalMsgEl = document.getElementById('finalMessage');

            finalScoreEl.innerText = percentage + "%";

            // GRADES LOGIC
            let rank, color, msg;

            if (currentLevel === 1) {
                // LEVEL 1 GRADES
                if (passed) {
                    rank = "Analyste Confirm√© ‚úÖ";
                    color = "#10b981";
                    msg = "Bravo ! Vous avez valid√© les fondamentaux. Le Niveau Expert est d√©verrouill√©.";
                    // UNLOCK LEVEL 2
                    localStorage.setItem('quiz_level_1_passed', 'true');

                    // Add "Go to Expert" button
                    const btnContainer = ui.result.querySelector('div[style*="display: flex"]');
                    btnContainer.innerHTML = `
                        <button onclick="startLevel(2)" style="padding: 15px 30px; background: #a855f7; color: white; border: none; border-radius: 50px; cursor: pointer; font-weight: bold; box-shadow: 0 0 15px rgba(168, 85, 247, 0.4);">
                            <i class="fas fa-crown"></i> Passer au Niveau Expert
                        </button>
                    `;
                } else {
                    rank = "Stagiaire D√©butant";
                    color = "#ef4444";
                    msg = "Encore un effort ! Il faut 80% pour passer √† la suite.";
                    // Restore retry button if needed
                    const btnContainer = ui.result.querySelector('div[style*="display: flex"]');
                    btnContainer.innerHTML = `
                        <button onclick="location.reload()" style="padding: 15px 30px; background: transparent; border: 1px solid var(--text-muted); color: white; border-radius: 50px; cursor: pointer; font-weight: bold;">R√©essayer</button>
                    `;
                }
            } else {
                // LEVEL 2 GRADES (TRADING ROOM)
                if (percentage < 50) {
                    rank = "Back Office Trainee";
                    color = "#94a3b8"; // Grey
                    msg = "Vous √™tes encore loin du Front Office. Reoyez le module 'Op√©rations'.";
                } else if (percentage < 70) {
                    rank = "Middle Office Analyst";
                    color = "#f59e0b"; // Orange
                    msg = "Solide sur les risques, mais il manque l'agilit√© du Trader.";
                } else if (percentage < 90) {
                    rank = "Front Office Junior Trader";
                    color = "#3b82f6"; // Blue
                    msg = "Tr√®s bon ! Vous √™tes pr√™t √† quoter vos premiers Digital Bonds.";
                } else {
                    rank = "Global Head of Digital Assets üèÜ";
                    color = "#a855f7"; // Purple
                    msg = "Performance exceptionnelle. Vous dominez le march√©. F√©licitations !";
                }

                // Restore default buttons for Level 2
                const btnContainer = ui.result.querySelector('div[style*="display: flex"]');
                btnContainer.innerHTML = `
                    <button onclick="location.reload()" style="padding: 15px 30px; background: transparent; border: 1px solid var(--text-muted); color: white; border-radius: 50px; cursor: pointer; font-weight: bold;">Retour au Centre</button>
                    <a href="index.html" style="padding: 15px 30px; background: var(--accent-blue); color: white; border-radius: 50px; text-decoration: none; font-weight: bold;">Retour Bureau</a>
                `;
            }

            finalRankEl.innerText = rank;
            finalRankEl.style.color = color;
            finalMsgEl.innerText = msg;
            finalScoreEl.style.borderColor = color;
        }

    </script>
</body>

</html>