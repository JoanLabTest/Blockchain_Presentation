<!DOCTYPE html>
<html lang="fr">

<head>
    <link rel="alternate" hreflang="fr" href="https://joanlabtest.github.io/Blockchain_Presentation/yield-mechanics.html">
    <link rel="alternate" hreflang="x-default" href="https://joanlabtest.github.io/Blockchain_Presentation/yield-mechanics.html">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yield Mechanics - √âducation aux Actifs Num√©riques</title>

    <!-- SEO META TAGS -->
    <meta name="description"
        content="Comprendre les rendements DeFi : APR vs APY, Staking, et m√©canismes de g√©n√©ration de yield institutionnel. Guide complet des m√©triques de rendement.">
    <meta name="keywords" content="Yield, APR, APY, Staking, DeFi, Rendement, Int√©r√™ts Compos√©s, Ethereum">
    <meta property="og:title" content="Yield Mechanics - Ma√Ætriser le Rendement DeFi">
    <meta property="og:description"
        content="APR vs APY, Staking, et strat√©gies de rendement institutionnelles expliqu√©es.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://joanlabtest.github.io/Blockchain_Presentation/yield-mechanics.html">

    <!-- FONTS -->
    <link
        href="https://fonts.googleapis.com/css2?family=Urbanist:wght@300;400;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <!-- ICONS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- ANIMATIONS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="styles-footer.css">
    <!-- MATH -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- JSON-LD EDUCATIONAL DATA -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "DefinedTermSet",
      "name": "Terminologie du Rendement DeFi",
      "description": "D√©finitions des concepts cl√©s de la finance d√©centralis√©e et du staking.",
      "hasDefinedTerm": [
        {
          "@type": "DefinedTerm",
          "termCode": "APR",
          "name": "Annual Percentage Rate",
          "description": "Taux annuel effectif global sans composition. Repr√©sente l'int√©r√™t simple."
        },
        {
          "@type": "DefinedTerm",
          "termCode": "APY",
          "name": "Annual Percentage Yield",
          "description": "Taux de rendement annuel tenant compte des int√©r√™ts compos√©s (r√©investissement)."
        },
        {
          "@type": "DefinedTerm",
          "termCode": "PoS",
          "name": "Proof of Stake",
          "description": "M√©canisme de consensus o√π les validateurs bloquent des fonds pour s√©curiser le r√©seau."
        },
        {
          "@type": "DefinedTerm",
          "termCode": "Slashing",
          "name": "Slashing",
          "description": "P√©nalit√© financi√®re appliqu√©e √† un validateur pour comportement malveillant ou inactivit√©."
        }
      ]
    }
    </script>

    <style>
        /* --- DESIGN SYSTEM (INSTITUTIONAL DARK) --- */
        :root {
            --bg-dark: #020617;
            --bg-card: #0f172a;
            --text-main: #f3f4f6;
            --text-muted: #94a3b8;
            --accent-green: #10b981;
            --accent-blue: #3b82f6;
            --accent-purple: #a855f7;
            --accent-red: #ef4444;
            --accent-gold: #f59e0b;
            --border: #1e293b;
            --border-hover: #334155;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-dark);
            font-family: 'Urbanist', sans-serif;
            color: var(--text-main);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* SCROLLBAR */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }

        /* NAVIGATION */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 70px;
            background: rgba(2, 6, 23, 0.95);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
            z-index: 1000;
        }

        .nav-logo {
            font-weight: 800;
            font-size: 18px;
            color: white;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .back-btn {
            color: var(--text-muted);
            text-decoration: none;
            font-weight: bold;
            border: 1px solid var(--border);
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 12px;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .back-btn:hover {
            background: white;
            color: black;
            border-color: white;
        }

        /* SIDEBAR NAVIGATION */
        .sidebar {
            position: fixed;
            top: 100px;
            left: 20px;
            width: 240px;
            background: rgba(15, 23, 42, 0.9);
            /* More opaque to hide content behind */
            backdrop-filter: blur(12px);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            z-index: 9999;
            /* Max Z-Index */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
        }

        .sidebar-title {
            font-size: 14px;
            font-weight: 700;
            color: white;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-link {
            display: block;
            color: var(--text-muted);
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 6px;
            margin-bottom: 5px;
            font-size: 14px;
            transition: all 0.2s;
            border-left: 2px solid transparent;
        }

        .nav-link:hover,
        .nav-link.active {
            color: white;
            background: rgba(255, 255, 255, 0.05);
            border-left-color: var(--accent-green);
        }

        /* CONTENT WRAPPER */
        .content-wrapper {
            margin-left: 280px;
            /* Space for sidebar */
            padding: 20px;
            max-width: 1000px;
            /* Prevent stretching */
        }

        .tech-section {
            margin-bottom: 80px;
            padding-top: 20px;
        }

        /* SIDE TOC (Added for V1 navigation) */
        .toc-sidebar {
            position: fixed;
            top: 100px;
            right: 20px;
            width: 220px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            font-size: 12px;
            display: none;
            /* Visible on large screens */
        }

        @media (min-width: 1400px) {
            .toc-sidebar {
                display: block;
            }
        }

        .toc-list {
            list-style: none;
        }

        .toc-item {
            margin-bottom: 10px;
        }

        .toc-link {
            color: var(--text-muted);
            text-decoration: none;
            transition: 0.2s;
            display: block;
            padding: 5px 0;
        }

        .toc-link:hover,
        .toc-link.active {
            color: var(--accent-green);
            padding-left: 5px;
            border-left: 2px solid var(--accent-green);
        }

        /* CONTAINER */
        .container {
            max-width: 1000px;
            margin: 100px auto;
            padding: 0 20px;
            position: relative;
        }

        .section-box {
            margin-bottom: 80px;
            padding-bottom: 40px;
            border-bottom: 1px solid var(--border);
        }

        .section-box:last-child {
            border-bottom: none;
        }

        h1 {
            font-size: 56px;
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 20px;
            letter-spacing: -1px;
            color: white;
        }

        h2 {
            font-size: 32px;
            color: white;
            margin-bottom: 30px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 15px;
            border-left: 4px solid var(--accent-green);
            padding-left: 20px;
        }

        h3 {
            font-size: 20px;
            color: white;
            margin-bottom: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        p {
            font-size: 16px;
            color: var(--text-muted);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        ul {
            margin-bottom: 20px;
            padding-left: 20px;
            color: var(--text-muted);
        }

        li {
            margin-bottom: 8px;
        }

        /* BADGES (From V1) */
        .audience-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 50px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            margin-right: 8px;
            border: 1px solid var(--border);
            color: var(--text-muted);
            background: var(--bg-card);
        }

        .badge-green {
            border-color: rgba(16, 185, 129, 0.3);
            color: var(--accent-green);
            background: rgba(16, 185, 129, 0.05);
        }

        /* GRIDS & CARDS */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        @media (max-width: 768px) {

            .grid-2,
            .grid-3 {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 40px;
            }
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            padding: 25px;
            border-radius: 12px;
            transition: transform 0.2s, border-color 0.2s;
            height: 100%;
        }

        .card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-green);
        }

        /* --- CALCULATOR UI --- */
        .calc-box {
            background: #0b0b0b;
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 30px;
            border-top: 4px solid var(--accent-green);
            height: 100%;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            color: var(--text-muted);
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .calc-input,
        select.calc-input {
            width: 100%;
            background: #1a1a1a;
            border: 1px solid #333;
            padding: 12px;
            color: white;
            border-radius: 6px;
            font-family: 'JetBrains Mono';
            font-size: 16px;
            outline: none;
            transition: 0.2s;
        }

        .calc-input:focus {
            border-color: var(--accent-green);
            background: #222;
        }

        .calc-result {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 20px;
            border-top: 1px dashed #333;
            margin-top: 20px;
        }

        .res-val {
            font-size: 24px;
            font-weight: bold;
            color: var(--accent-green);
            font-family: 'JetBrains Mono';
        }

        /* RANGE SLIDER */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            background: #333;
            border-radius: 3px;
            outline: none;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--accent-green);
            cursor: pointer;
            border: 2px solid #000;
        }

        /* --- RISK MATRIX & TABLES --- */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
            margin-top: 20px;
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
        }

        .data-table th {
            text-align: left;
            padding: 15px;
            color: #fff;
            border-bottom: 2px solid #333;
            background: #111;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 0.5px;
        }

        .data-table td {
            padding: 15px;
            border-bottom: 1px solid #222;
            color: var(--text-muted);
            vertical-align: middle;
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .risk-tag {
            font-size: 10px;
            font-weight: bold;
            padding: 4px 10px;
            border-radius: 4px;
            color: #000;
            display: inline-block;
            min-width: 60px;
            text-align: center;
        }

        .r-green {
            background: var(--accent-green);
            color: #000;
        }

        .r-yellow {
            background: var(--accent-gold);
            color: #000;
        }

        .r-red {
            background: var(--accent-red);
            color: white;
        }

        .r-blue {
            background: var(--accent-blue);
            color: white;
        }

        /* --- CORRELATION MATRIX --- */
        .corr-matrix-container {
            overflow-x: auto;
        }

        .corr-matrix {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 1px;
            margin-top: 20px;
            background: #333;
            padding: 1px;
            border-radius: 8px;
            overflow: hidden;
            min-width: 600px;
        }

        .corr-cell {
            background: #0f172a;
            padding: 15px 10px;
            text-align: center;
            font-size: 13px;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .corr-header {
            font-weight: 700;
            color: #fff;
            background: #1e293b;
            font-size: 12px;
        }

        .corr-val {
            font-family: 'JetBrains Mono';
            font-weight: bold;
            font-size: 14px;
        }

        /* --- CALLOUT BOXES --- */
        .callout {
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-size: 15px;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .callout-info {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid var(--accent-blue);
            color: var(--text-main);
        }

        .callout-warn {
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--accent-gold);
            color: var(--text-main);
        }

        .callout-inst {
            background: rgba(16, 185, 129, 0.05);
            border: 1px dashed var(--accent-green);
            border-radius: 12px;
        }

        .callout i {
            font-size: 20px;
        }

        /* --- FORMULA BOX --- */
        .formula-box {
            background: #0b0b0b;
            border: 1px solid var(--border);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
            font-family: 'JetBrains Mono';
            color: var(--accent-green);
            font-size: 18px;
        }

        /* --- VISUAL RISK MATRIX --- */
        .risk-matrix-grid {
            display: grid;
            grid-template-columns: 40px 1fr 1fr 1fr;
            grid-template-rows: auto 1fr 1fr 1fr;
            gap: 5px;
            margin-top: 30px;
            background: #1e293b;
            padding: 5px;
            border-radius: 8px;
        }

        .rm-header {
            font-weight: bold;
            text-align: center;
            font-size: 12px;
            color: #fff;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .rm-axis-y {
            grid-row: 2 / span 3;
            writing-mode: vertical-rl;
            transform: rotate(180deg);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .rm-axis-x {
            grid-column: 2 / span 3;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .rm-cell {
            background: #0f172a;
            border: 1px solid #333;
            min-height: 120px;
            position: relative;
            padding: 10px;
            transition: 0.2s;
        }

        .rm-cell:hover {
            background: #1a2333;
        }

        /* Risk Points */
        .risk-point {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
            margin: 2px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            transition: 0.2s;
        }

        .risk-point:hover {
            transform: scale(1.1);
            z-index: 10;
        }

        .rp-high {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid var(--accent-red);
            color: var(--accent-red);
        }

        .rp-med {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid var(--accent-gold);
            color: var(--accent-gold);
        }

        .rp-low {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid var(--accent-green);
            color: var(--accent-green);
        }

        /* Chart Canvas */
        .chart-container {
            position: relative;
            height: 250px;
            width: 100%;
            margin-top: 20px;
        }
    </style>
</head>

<body>

    <nav class="navbar">
        <div class="nav-logo">
            <i class="fa-solid fa-chart-pie" style="color: var(--accent-green);"></i> YIELD <span
                style="color:var(--text-muted); margin-left:5px;">MECHANICS</span>
        </div>
        <a aria-label="Retour" href="index.html" class="back-btn"><i class="fa-solid fa-arrow-left"></i> HUB DIGITAL</a>
    </nav>

    <!-- TABLE OF CONTENTS (Desktop) -->
    <div class="toc-sidebar">
        <strong style="color: white; display: block; margin-bottom: 15px; letter-spacing: 1px;">SOMMAIRE</strong>
        <ul class="toc-list">
            <li class="toc-item"><a aria-label="Lien sommaire" href="#section-1" class="toc-link">1. APR vs APY</a></li>
            <li class="toc-item"><a aria-label="Lien sommaire" href="#section-2" class="toc-link">2. M√©canismes de Staking</a></li>
            <li class="toc-item"><a aria-label="Lien sommaire" href="#section-3" class="toc-link">3. Sources de Rendement</a></li>
            <li class="toc-item"><a aria-label="Lien sommaire" href="#section-4" class="toc-link">4. Cadre de Risques</a></li>
            <li class="toc-item"><a aria-label="Lien sommaire" href="#section-5" class="toc-link">5. Illusions DeFi</a></li>
            <li class="toc-item"><a aria-label="Lien sommaire" href="#section-6" class="toc-link">6. Analyse Comparative</a></li>
            <li class="toc-item"><a aria-label="Lien sommaire" href="#section-7" class="toc-link">7. Perspective Institutionnelle</a></li>
            <li class="toc-item"><a aria-label="Lien sommaire" href="#section-8" class="toc-link">8. Sim Rendement R√©el</a></li>
            <li class="toc-item"><a aria-label="Lien sommaire" href="#section-9" class="toc-link">9. Analytique Avanc√©e</a></li>
            <li class="toc-item"><a aria-label="Lien sommaire" href="#section-10" class="toc-link">10. Fiscalit√© & Conformit√©</a></li>
        </ul>
    </div>

    <div class="container" role="main">

        <!-- HERO SECTION -->
        <div class="section-box"
            style="text-align: center; border-bottom: none; margin-bottom: 40px; padding-top: 40px;"
            data-aos="fade-down">
            <span
                style="background: rgba(16, 185, 129, 0.1); color: var(--accent-green); padding: 5px 15px; border-radius: 50px; font-size: 12px; font-weight: bold; letter-spacing: 1px; border: 1px solid rgba(16, 185, 129, 0.2);">MODULE
                √âDUCATIF</span>
            <h1 style="margin-top: 25px;">M√©canismes de Rendement<br>Actifs Num√©riques</h1>
            <p style="max-width: 700px; margin: 0 auto 30px auto;">
                Un cadre complet pour comprendre l'APR, l'APY, les risques de Staking et le calcul du Rendement R√©el
                pour les investisseurs institutionnels.
            </p>
            <div>
                <span class="audience-badge badge-green">Investisseurs</span>
                <span class="audience-badge badge-green">√âtudiants</span>
                <span class="audience-badge badge-green">Gestionnaires de Risques</span>
                <span class="audience-badge badge-green">Retail</span>
            </div>
        </div>

        <!-- 1. APR vs APY -->
        <div id="section-1" class="section-box" data-aos="fade-up">
            <h2>1. Fondamentaux : APR vs APY</h2>
            <div class="grid-2">
                <div>
                    <p>La distinction entre APR et APY est le concept le plus fondamental de l'analyse de rendement. Mal
                        comprendre ces m√©triques conduit √† des √©carts significatifs dans les rendements attendus.</p>

                    <h3><i class="fa-solid fa-calculator" style="color:var(--accent-blue)"></i> APR (Taux Nominal)</h3>
                    <p><strong>Annual Percentage Rate</strong> refl√®te le taux d'int√©r√™t simple sur une ann√©e. Il ne
                        tient <strong>pas</strong> compte de la composition des int√©r√™ts au cours de l'ann√©e.</p>
                    <div class="formula-box">$$ APR = r \times 1 $$</div>

                    <h3 style="margin-top:30px;"><i class="fa-solid fa-chart-line"
                            style="color:var(--accent-green)"></i> APY (Taux R√©el)</h3>
                    <p><strong>Annual Percentage Yield</strong> refl√®te le taux de rendement r√©el gagn√© sur un
                        investissement, prenant en compte l'effet des int√©r√™ts compos√©s (r√©investissement des
                        r√©compenses).</p>
                    <div class="formula-box">$$ APY = (1 + \frac{r}{n})^n - 1 $$</div>
                    <p style="font-size:14px; color:var(--text-muted);">O√π <em>r</em> est l'APR et <em>n</em> est la
                        fr√©quence de composition.</p>

                    <div class="callout callout-info">
                        <i class="fa-solid fa-info-circle" style="color:var(--accent-blue)"></i>
                        <div>
                            <strong>R√®gle Institutionnelle :</strong> Toujours v√©rifier si un rendement cot√© est en APR
                            ou APY. Pour une composition √† haute fr√©quence (ex: journali√®re), la diff√©rence est
                            substantielle.
                        </div>
                    </div>
                </div>

                <!-- CALCULATOR 1 -->
                <div class="calc-box">
                    <h3>üßÆ Calculateur APR vers APY</h3>
                    <p style="font-size:14px; margin-bottom:20px;">Visualisez l'impact de la fr√©quence de composition.
                    </p>

                    <div class="input-group">
                        <label>APR Nominal (%)</label>
                        <input type="number" id="aprInput" value="10" class="calc-input" oninput="calcAPY()">
                    </div>
                    <div class="input-group">
                        <label>Fr√©quence de Composition</label>
                        <select id="freqInput" class="calc-input" onchange="calcAPY()">
                            <option value="1">Annuelle (n=1)</option>
                            <option value="2">Semestrielle (n=2)</option>
                            <option value="4">Trimestrielle (n=4)</option>
                            <option value="12">Mensuelle (n=12)</option>
                            <option value="52">Hebdomadaire (n=52)</option>
                            <option value="365" selected>Journali√®re (n=365)</option>
                        </select>
                    </div>

                    <div class="calc-result">
                        <span>Rendement Effectif (APY)</span>
                        <span class="res-val" id="apyResult">10.52%</span>
                    </div>
                    <div style="text-align:right; font-size:12px; color:var(--text-muted); margin-top:5px;">
                        Gain d√ª √† la composition : <span id="apyDiff" style="color:var(--accent-green)">+0.52%</span>
                    </div>
                    <div class="res-label">APY Estim√© (Net)</div>
                    <div class="res-val" id="apyVal">3.4%</div>
                </div>

                <!-- SAVE BUTTON (SaaS Feature) -->
                <button aria-label="Bouton" id="btnSaveSim"
                    style="width:100%; margin-top:20px; background:var(--bg-card); border:1px solid var(--accent-gold); color:var(--accent-gold); padding:10px; border-radius:8px; cursor:pointer; font-weight:bold; transition:0.2s;">
                    <i class="fas fa-save"></i> SAUVEGARDER SC√âNARIO
                </button>
            </div>

            <div class="chart-container">
                <canvas id="apyChart"></canvas>
            </div>
        </div>
    </div>
    </div>
    </div>

    <!-- TOAST ELEMENT -->
    <div id="toast"><i class="fas fa-check-circle"></i> Sc√©nario sauvegard√© avec succ√®s !</div>

    <!-- LOGIC -->
    <script type="module">
        import { simEngine } from './js/simulation.js';

        // Calculator Logic (Simplified for Demo)
        const ethInput = document.getElementById('ethAmount');
        const durationInput = document.getElementById('duration');
        const apyDisplay = document.getElementById('apyVal');

        function calculate() {
            let eth = parseFloat(ethInput.value);
            let apy = 3.2 + (Math.random() * 0.5);
            apyDisplay.innerText = apy.toFixed(1) + "%";
        }

        ethInput.addEventListener('input', calculate);
        durationInput.addEventListener('input', calculate);

        // TOAST FUNCTION
        function showToast(message) {
            const toast = document.getElementById("toast");
            toast.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
            toast.className = "show";
            setTimeout(function () { toast.className = toast.className.replace("show", ""); }, 3000);
        }

        // SAVE HANDLER
        document.getElementById('btnSaveSim').addEventListener('click', () => {
            // Simple visual feedback before prompt
            const btn = document.getElementById('btnSaveSim');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ...';

            setTimeout(() => {
                const name = prompt("Nom du sc√©nario :", "Validation Node #" + Math.floor(Math.random() * 1000));
                if (name) {
                    simEngine.save(
                        'YIELD',
                        name,
                        { eth: ethInput.value, duration: durationInput.value },
                        { apy: apyDisplay.innerText }
                    );
                    showToast("Sc√©nario sauvegard√© dans votre Dashboard !");
                }
                btn.innerHTML = originalText;
            }, 100);
        });
    </script>
    <!-- 2. STAKING MECHANICS -->
    <div id="section-2" class="section-box" data-aos="fade-up">
        <h2>2. M√©canismes de Staking (PoS)</h2>
        <p>Le Staking est le m√©canisme par lequel les validateurs engagent du capital (ETH, SOL, etc.) pour
            s√©curiser un r√©seau Proof-of-Stake. Contrairement au Mining (PoW) qui n√©cessite de l'√©nergie, le Staking
            n√©cessite un engagement de capital.</p>

        <div class="grid-3" style="margin-top:30px;">
            <div class="card">
                <i class="fa-solid fa-server"
                    style="font-size:30px; color:var(--accent-purple); margin-bottom:15px;"></i>
                <h3>Validation</h3>
                <p style="font-size:14px;">Les validateurs bloquent du capital (ex: 32 ETH) pour proposer et
                    attester des blocs. C'est une caution ou "Skin in the game".</p>
                <div style="font-size:12px; margin-top:10px; padding-top:10px; border-top:1px solid #222; color:#666;">
                    <strong>R√¥le :</strong> S√©curiser le R√©seau
                </div>
            </div>
            <div class="card">
                <i class="fa-solid fa-coins" style="font-size:30px; color:var(--accent-gold); margin-bottom:15px;"></i>
                <h3>R√©compenses</h3>
                <p style="font-size:14px;">En √©change d'un travail honn√™te, les validateurs re√ßoivent des
                    r√©compenses protocolaires (Inflation) et des frais de transaction.</p>
                <div style="font-size:12px; margin-top:10px; padding-top:10px; border-top:1px solid #222; color:#666;">
                    <strong>Incitation :</strong> Rendement (~3-5%)
                </div>
            </div>
            <div class="card">
                <i class="fa-solid fa-gavel" style="font-size:30px; color:var(--accent-red); margin-bottom:15px;"></i>
                <h3>Slashing</h3>
                <p style="font-size:14px;">Un m√©canisme de p√©nalit√©. Si un validateur agit malicieusement (ex:
                    double signature) ou est hors ligne, une partie de sa mise est br√ªl√©e.</p>
                <div style="font-size:12px; margin-top:10px; padding-top:10px; border-top:1px solid #222; color:#666;">
                    <strong>Risque :</strong> Perte de Capital
                </div>
            </div>
        </div>
    </div>

    <!-- 3. YIELD SOURCES -->
    <div id="section-3" class="section-box" data-aos="fade-up">
        <h2>3. Sources de Rendement</h2>
        <p>Tous les rendements ne se valent pas. Comprendre la source est critique pour l'analyse de durabilit√©.</p>

        <div class="grid-3">
            <div class="card" style="border-top:3px solid var(--accent-blue);">
                <h3>1. √âmission (Rewards)</h3>
                <p style="font-size:14px;">Inflation mon√©taire au niveau du protocole. De nouveaux jetons sont cr√©√©s
                    pour payer les validateurs.</p>
                <ul style="font-size:13px; margin-top:10px;">
                    <li><strong>Durabilit√© :</strong> Faible (Dilutif)</li>
                    <li><strong>Note :</strong> Le rendement r√©el d√©pend du taux de burn vs √©mission.</li>
                </ul>
            </div>
            <div class="card" style="border-top:3px solid var(--accent-green);">
                <h3>2. Ex√©cution (Frais)</h3>
                <p style="font-size:14px;">Frais de priorit√© pay√©s par les utilisateurs pour inclure leurs
                    transactions dans un bloc.</p>
                <ul style="font-size:13px; margin-top:10px;">
                    <li><strong>Durabilit√© :</strong> √âlev√©e (Demande Organique)</li>
                    <li><strong>Moteur :</strong> Activit√©/usage du r√©seau.</li>
                </ul>
            </div>
            <div class="card" style="border-top:3px solid var(--accent-purple);">
                <h3>3. MEV (Boost)</h3>
                <p style="font-size:14px;"><strong>Maximal Extractable Value.</strong> Profit suppl√©mentaire tir√© du
                    r√©ordonnancement des transactions (arbitrage, liquidations).</p>
                <ul style="font-size:13px; margin-top:10px;">
                    <li><strong>Durabilit√© :</strong> Variable</li>
                    <li><strong>Potentiel :</strong> Pics √©lev√©s lors de volatilit√©.</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- 4. RISK FRAMEWORK -->
    <div id="section-4" class="section-box" data-aos="fade-up">
        <h2>4. Cadre de Risques (5 Points)</h2>
        <p>√âvaluation institutionnelle des risques de staking au-del√† de la simple volatilit√© de march√©.</p>

        <div class="risk-matrix-grid">
            <!-- Header Row -->
            <div class="rm-header"></div>
            <div class="rm-header" style="background:#22c55e20; color:var(--accent-green)">IMPACT FAIBLE</div>
            <div class="rm-header" style="background:#eab30820; color:var(--accent-gold)">IMPACT MOYEN</div>
            <div class="rm-header" style="background:#ef444420; color:var(--accent-red)">IMPACT CRITIQUE</div>

            <!-- Axis Labels -->
            <div class="rm-axis-y">PROBABILIT√â</div>

            <!-- Row 1: √âLEV√âE -->
            <div class="rm-header" style="writing-mode:vertical-rl; transform:rotate(180deg); font-size:10px;">
                FR√âQUENT</div>
            <div class="rm-cell">
                <div class="risk-point rp-low" title="Fluctuations mineures du rendement">Yield Compression</div>
            </div>
            <div class="rm-cell">
                <div class="risk-point rp-med" title="Volatilit√© prix > rendement">Volatilit√© March√©</div>
            </div>
            <div class="rm-cell">
                <!-- Vide -->
            </div>

            <!-- Row 2: MOYENNE -->
            <div class="rm-header" style="writing-mode:vertical-rl; transform:rotate(180deg); font-size:10px;">
                OCCASIONNEL</div>
            <div class="rm-cell">
                <!-- Vide -->
            </div>
            <div class="rm-cell">
                <div class="risk-point rp-med" title="D√©lai de d√©blocage">Illiquidit√© (21j)</div>
            </div>
            <div class="rm-cell">
                <div class="risk-point rp-high" title="P√©nalit√© mineure de slashing">Slashing (Downtime)</div>
            </div>

            <!-- Row 3: RARE -->
            <div class="rm-header" style="writing-mode:vertical-rl; transform:rotate(180deg); font-size:10px;">RARE
            </div>
            <div class="rm-cell">
                <!-- Vide -->
            </div>
            <div class="rm-cell">
                <div class="risk-point rp-high" title="Depeg Stablecoin/LST">Validateur Malicieux</div>
            </div>
            <div class="rm-cell" style="background:rgba(239,68,68,0.05)">
                <div class="risk-point rp-high" title="Echec complet du protocole ou Hack">Smart Contract Exploit
                </div>
            </div>
        </div>

        <div style="font-size:12px; color:var(--text-muted); text-align:center; margin-top:10px;">
            <i class="fa-solid fa-arrows-up-down-left-right"></i> Survolez les risques pour voir les d√©tails.
        </div>
    </div>

    <!-- 5. DEFI ILLUSIONS -->
    <div id="section-5" class="section-box" data-aos="fade-up">
        <h2>5. Illusions de Rendement DeFi</h2>
        <div class="callout callout-warn">
            <i class="fa-solid fa-triangle-exclamation" style="color:var(--accent-gold)"></i>
            <div>
                <strong>Le Pi√®ge du "Haut Rendement" :</strong> Si un rendement provient d'√©missions de jetons
                plut√¥t que de revenus, il est probablement insoutenable.
                Toujours demander : <em>"D'o√π vient l'argent ?"</em>
            </div>
        </div>

        <div class="grid-2">
            <div>
                <h3>üö© Drapeaux Rouges</h3>
                <ul style="margin-top:15px;">
                    <li><strong>APY > 20% sur Stablecoins :</strong> Indique souvent un levier √©lev√© ou une
                        m√©canique de Ponzi (ex: Anchor Protocol).</li>
                    <li><strong>Rendement en "Jetons de Gouvernance" :</strong> Vous √™tes pay√© dans un actif volatil
                        qui subit une pression vendeuse constante.</li>
                    <li><strong>Bonus de Verrouillage :</strong> "Bloquez 4 ans pour 4x le rendement" r√©sulte
                        souvent en une valeur nulle au d√©blocage.</li>
                </ul>
            </div>
            <div>
                <h3>√âtude de Cas : Anchor Protocol (UST)</h3>
                <div class="card" style="padding:20px; border-left:4px solid var(--accent-red);">
                    <div style="font-weight:bold; margin-bottom:5px;">Rendement Promis : 20% Fixe</div>
                    <div style="font-size:14px; color:var(--text-muted); margin-bottom:10px;">Source : Subventions
                        VC & R√©flexivit√© Ponzi</div>
                    <div style="font-weight:bold; color:var(--accent-red);">R√©sultat : Effondrement de 40Md$ en Mai
                        2022</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 6. COMPARATIVE ANALYSIS -->
    <div id="section-6" class="section-box" data-aos="fade-up">
        <h2>6. Analyse Comparative</h2>
        <p>Comparaison du Staking Crypto Natif face aux autres strat√©gies de rendement num√©rique.</p>

        <table class="data-table">
            <thead>
                <tr>
                    <th>Strat√©gie</th>
                    <th>APY Typique</th>
                    <th>Profil de Risque</th>
                    <th>Source de Rendement</th>
                    <th>Risque R√©glementaire</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Staking (ETH)</strong></td>
                    <td>3.0% - 4.5%</td>
                    <td><span class="risk-tag r-yellow">MOYEN</span></td>
                    <td>Fonction du Protocole</td>
                    <td>Moyen (S√©curit√© ?)</td>
                </tr>
                <tr>
                    <td><strong>Pr√™ts (Aave)</strong></td>
                    <td>2.0% - 10.0%</td>
                    <td><span class="risk-tag r-yellow">MOYEN</span></td>
                    <td>Int√©r√™ts Emprunteurs (Variable)</td>
                    <td>Faible (Logiciel)</td>
                </tr>
                <tr>
                    <td><strong>RWA (Bons du Tr√©sor)</strong></td>
                    <td>4.5% - 5.5%</td>
                    <td><span class="risk-tag r-green">FAIBLE</span></td>
                    <td>Dette Gouv. US</td>
                    <td>√âlev√© (Full KYC)</td>
                </tr>
                <tr>
                    <td><strong>Pr√™ts CeFi</strong></td>
                    <td>4% - 12%</td>
                    <td><span class="risk-tag r-red">√âLEV√â</span></td>
                    <td>R√©hypoth√©cation / Trading</td>
                    <td>Critique (Faillite)</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- 7. INSTITUTIONAL PERSPECTIVE -->
    <div id="section-7" class="section-box" data-aos="fade-up">
        <h2>7. Perspective Institutionnelle</h2>
        <div class="grid-2">
            <div>
                <h3>Score de Durabilit√© du Rendement</h3>
                <p>Les institutions quantifient la qualit√© du rendement via le ratio Revenus de Frais (Organique)
                    sur √âmission Totale (Inflation).</p>
                <div class="formula-box" style="font-size:14px;">$$ Score = \frac{Frais}{R√©compenses} \times 100 $$
                </div>
                <p style="font-size:14px;"><em>Ethereum score r√©guli√®rement >60%, tandis que la plupart des alt-L1
                        scorent <5%, d√©pendant enti√®rement de l'inflation.</em>
                </p>
            </div>
            <div>
                <h3>Vue R√©glementaire (US vs UE)</h3>
                <div class="card" style="padding:20px;">
                    <ul style="margin:0; padding-left:15px; font-size:14px;">
                        <li><strong>üá∫üá∏ USA (SEC) :</strong> Le Staking-as-a-Service est souvent vu comme un
                            contrat d'investissement (Security). Le staking auto-gard√© est plus s√ªr.</li>
                        <li style="margin-top:10px;"><strong>üá™üá∫ UE (MiCA) :</strong> Cadre plus clair. Le staking
                            est g√©n√©ralement reconnu comme un service technique, distinct des produits financiers.
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- 8. REAL YIELD SIMULATOR -->
    <div id="section-8" class="section-box" data-aos="fade-up">
        <h2>8. Simulateur de "Rendement R√©el"</h2>
        <div class="grid-2">
            <div>
                <h3>Le Pi√®ge du Rendement</h3>
                <p>Un APY √©lev√© ne signifie rien si l'actif sous-jacent se d√©pr√©cie. Ce simulateur calcule votre
                    **Position Nette** en Fiat, en tenant compte de la volatilit√© des prix.</p>

                <h4 style="margin-top:20px; color:white;">Sc√©narios :</h4>
                <ul style="font-size:14px; margin-top:10px;">
                    <li><strong>Bon :</strong> 5% Rendement + 10% Hausse Prix = <span
                            style="color:var(--accent-green)">+15.5% Retour R√©el</span></li>
                    <li><strong>Mauvais :</strong> 20% Rendement - 30% Chute Prix = <span
                            style="color:var(--accent-red)">-16.0% Retour R√©el</span></li>
                </ul>

                <div class="callout callout-inst" style="margin-top:40px;">
                    <i class="fa-solid fa-lightbulb" style="color:var(--accent-green)"></i>
                    <div>
                        <strong>Conseil Pro :</strong> Le staking cr√©e un "coussin". Un rendement de 5% permet √†
                        l'actif de chuter de 4.7% tout en maintenant le seuil de rentabilit√©.
                    </div>
                </div>
            </div>

            <!-- CALCULATOR 2 -->
            <div class="calc-box" style="border-top-color: var(--accent-red);">
                <h3>üìâ Stress Test de Rendement R√©el</h3>

                <div class="input-group">
                    <label>Investissement Principal ($)</label>
                    <input type="number" id="principal" value="100000" class="calc-input" oninput="calcRealYield()">
                </div>

                <div class="input-group">
                    <label>APY de Staking (%)</label>
                    <input type="number" id="apy" value="8" class="calc-input" oninput="calcRealYield()">
                </div>

                <div class="input-group">
                    <label>Dur√©e d'Investissement (Ann√©es)</label>
                    <input type="range" id="duration" min="1" max="10" value="1"
                        style="margin-bottom:10px; accent-color:var(--text-muted);" oninput="calcRealYield()">
                    <div
                        style="font-family:'JetBrains Mono'; font-size:12px; text-align:right; color:var(--text-muted);">
                        <span id="durationVal">1</span> Ans
                    </div>
                </div>

                <div class="input-group">
                    <label>Variation Prix du Jeton (%)</label>
                    <input type="range" id="priceChange" min="-50" max="50" value="-20"
                        style="width:100%; accent-color:var(--accent-red); margin-bottom:10px;"
                        oninput="calcRealYield()">
                    <div style="text-align:right; font-family:'JetBrains Mono'; color:white; font-size:14px;"
                        id="priceVal">-20%</div>
                </div>

                <div class="calc-result">
                    <span>Valeur du Portefeuille</span>
                    <span class="res-val" id="finalValue">$ 86,400</span>
                </div>

                <div
                    style="display:flex; justify-content:space-between; font-size:12px; margin-top:10px; padding-top:10px; border-top:1px solid #222;">
                    <div style="color:var(--text-muted);">Gain Nominal : <span id="nominalGain"
                            style="color:white;">+8000 Jetons</span></div>
                    <div style="color:var(--text-muted);">P&L Net : <span id="netPnl"
                            style="color:var(--accent-red)">-13.60%</span></div>
                </div>

                <div class="chart-container">
                    <canvas id="yieldChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- 9. ADVANCED ANALYTICS -->
    <div id="section-9" class="section-box" data-aos="fade-up" style="border:none;">
        <h2>9. Analytique Avanc√©e</h2>

        <h3>A. Mod√®le de Stress Test Staking</h3>
        <p>Projections de Rendement R√©el sous divers sc√©narios "Black Swan".</p>
        <table class="data-table" style="margin-bottom:40px;">
            <thead>
                <tr>
                    <th>Sc√©nario</th>
                    <th>Impact APY</th>
                    <th>Impact Prix</th>
                    <th>R√©sultat (Rendement R√©el)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Sc√©nario de Base</strong></td>
                    <td>5.0%</td>
                    <td>0%</td>
                    <td><span style="color:var(--accent-green)">+5.00%</span></td>
                </tr>
                <tr>
                    <td><strong>√âv√©nement de Slashing (Mineur)</strong></td>
                    <td>5.0%</td>
                    <td>0%</td>
                    <td><span style="color:var(--accent-gold)">-1.00% (Perte Capital)</span></td>
                </tr>
                <tr>
                    <td><strong>Bear Market (-50%)</strong></td>
                    <td>5.0%</td>
                    <td>-50%</td>
                    <td><span style="color:var(--accent-red)">-47.5%</span></td>
                </tr>
                <tr>
                    <td><strong>Congestion R√©seau</strong></td>
                    <td>8.5%</td>
                    <td>+10%</td>
                    <td><span style="color:var(--accent-green)">+19.3%</span></td>
                </tr>
            </tbody>
        </table>

        <h3>B. Matrice de Corr√©lation</h3>
        <p>Corr√©lation du rendement de staking avec les actifs macro traditionnels (Donn√©es Hypoth√©tiques).</p>
        <div class="corr-matrix-container">
            <div class="corr-matrix">
                <!-- Headers -->
                <div class="corr-cell corr-header">Actif</div>
                <div class="corr-cell corr-header">S&P 500</div>
                <div class="corr-cell corr-header">Nasdaq</div>
                <div class="corr-cell corr-header">Or</div>
                <div class="corr-cell corr-header">US 10Y</div>
                <div class="corr-cell corr-header">BTC</div>

                <!-- Row 1: ETH Staking Yield -->
                <div class="corr-cell corr-header" style="text-align:left;">Rendement ETH</div>
                <div class="corr-cell corr-val">0.15</div>
                <div class="corr-cell corr-val">0.22</div>
                <div class="corr-cell corr-val">0.05</div>
                <div class="corr-cell corr-val">-0.10</div>
                <div class="corr-cell corr-val" style="color:var(--accent-green)">0.85</div>

                <!-- Row 2: RWA Yield -->
                <div class="corr-cell corr-header" style="text-align:left;">Rendement RWA</div>
                <div class="corr-cell corr-val">0.10</div>
                <div class="corr-cell corr-val">0.05</div>
                <div class="corr-cell corr-val">-0.15</div>
                <div class="corr-cell corr-val" style="color:var(--accent-green)">0.98</div>
                <div class="corr-cell corr-val">0.02</div>

                <!-- Row 3: DeFi Lending -->
                <div class="corr-cell corr-header" style="text-align:left;">Taux DeFi</div>
                <div class="corr-cell corr-val">0.45</div>
                <div class="corr-cell corr-val">0.50</div>
                <div class="corr-cell corr-val">0.12</div>
                <div class="corr-cell corr-val">0.30</div>
                <div class="corr-cell corr-val">0.90</div>
            </div>
        </div>

        <div class="callout callout-inst" style="background:#0f172a; margin-top:30px;">
            <i class="fa-solid fa-layer-group" style="color:var(--accent-purple)"></i>
            <div>
                <strong>Construction de Portefeuille :</strong>
                Le Staking Natif offre un "Taux sans risque crypto-natif", mais porte un risque de volatilit√© de
                type Actions compar√© aux RWA (Bons du Tr√©sor Tok√©nis√©s) qui offrent une stabilit√© d√©corr√©l√©e.
            </div>
        </div>
    </div>

    <!-- 10. FISCALITY & COMPLIANCE -->
    <div id="section-10" class="section-box" data-aos="fade-up" style="border:none;">
        <h2>10. Fiscalit√© & Conformit√© (Focus France/EU)</h2>
        <div class="grid-2">
            <div>
                <h3><i class="fa-solid fa-scale-balanced" style="color:var(--accent-blue)"></i> R√©gime Fiscal</h3>
                <p>Traitement des revenus de staking pour les r√©sidents fiscaux fran√ßais et soci√©t√©s.</p>

                <div class="card" style="margin-bottom:20px;">
                    <h4>Personnes Physiques (Retail)</h4>
                    <ul style="font-size:14px; margin-top:10px;">
                        <li><strong>Flat Tax (PFU) :</strong> 30% sur les plus-values lors de la conversion en Fiat.
                        </li>
                        <li><strong>Transactions Crypto-Crypto :</strong> Neutralis√©es (pas d'imposition tant que √ßa
                            reste en crypto).</li>
                    </ul>
                </div>

                <div class="card" style="border-left:4px solid var(--accent-purple);">
                    <h4>Soci√©t√©s (IS)</h4>
                    <ul style="font-size:14px; margin-top:10px;">
                        <li><strong>Imp√¥t sur les Soci√©t√©s :</strong> 15% (PME) ou 25%.</li>
                        <li><strong>Latence :</strong> Les gains doivent √™tre comptabilis√©s √† la valeur de march√© au
                            moment de la r√©ception (Mark-to-Market), m√™me sans conversion.</li>
                    </ul>
                </div>
            </div>

            <div>
                <h3><i class="fa-solid fa-passport" style="color:var(--accent-green)"></i> Statut R√©glementaire</h3>
                <div class="callout callout-inst">
                    <div>
                        <strong>MiCA (Markets in Crypto-Assets) :</strong>
                        L'UE √©tablit un cadre clair. Les services de Staking peuvent √™tre fournis par des CASP
                        (Crypto-Asset Service Providers) agr√©√©s.
                    </div>
                </div>

                <h3>Documentation Requise (Audit)</h3>
                <ul style="font-size:14px;">
                    <li><i class="fa-solid fa-check" style="color:var(--accent-green)"></i> <strong>Preuve de
                            D√©l√©gation :</strong> Transaction on-chain vers le validateur.</li>
                    <li><i class="fa-solid fa-check" style="color:var(--accent-green)"></i> <strong>Relev√© de
                            R√©compenses :</strong> Export CSV quotidien des rewards re√ßus.</li>
                    <li><i class="fa-solid fa-check" style="color:var(--accent-green)"></i> <strong>Valorisation
                            :</strong> Prix du token au jour de chaque reward.</li>
                </ul>
            </div>
        </div>
    </div>

    </div>

    <!-- PRO ANALYTICS CTA -->
    <section class="section-slide"
        style="padding: 60px 0; border-top: 1px solid #333; text-align: center; margin-top: 100px; position: relative; z-index: 10; background-color: #020617;">
        <div class="container" data-aos="fade-up">
            <h3 style="color:white; margin-bottom:10px;">Pour les Analystes Financiers</h3>
            <p>Acc√©dez aux mod√®les de rentabilit√© validateur et √† la matrice des risques institutionnels.</p>
            <a href="pos-economics.html" class="cta-button"
                style="margin-top: 20px; background: linear-gradient(135deg, #f59e0b, #d97706); display: inline-flex; align-items: center; gap: 10px;">
                <i class="fas fa-chart-pie"></i> ANALYSE √âCONOMIQUE VALIDATEUR (PRO)
            </a>
        </div>
    </section>

    <!-- SUPER FOOTER -->
    <footer class="super-footer">
        <div class="footer-content">
            <div class="footer-grid">
                <!-- 0. BRAND -->
                <div class="footer-brand">
                    <h3><i class="fas fa-cube" style="color:var(--accent-blue)"></i> DCM DIGITAL</h3>
                    <p>Plateforme d‚Äôanalyse d√©di√©e √† la tokenisation des actifs financiers et aux infrastructures blockchain publiques et institutionnelles.</p>
                    <div class="footer-socials">
                        <a href="https://www.linkedin.com/in/joan-lyczak/" class="social-btn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://github.com/JoanLabTest/Blockchain_Presentation" class="social-btn"><i class="fab fa-github"></i></a>
                        <a href="#" class="social-btn"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>

                <!-- 1. PRODUIT -->
                <div class="footer-col">
                    <h4><i class="fas fa-cube" style="font-size:10px; opacity:0.5; margin-right:5px;"></i> Produit</h4>
                    <ul class="footer-links">
                        <li><a href="index.html">Hub Central</a></li>
                        <li><a href="sandbox.html">Dashboard</a></li>
                        <li><a href="simple.html">Academy</a></li>
                        <li><a href="guide.html">Guide Expert</a></li>
                        <li><a href="yield-mechanics.html">Simulation Engine</a></li>
                        <li><a href="quiz.html">Certification</a></li>
                        <li><a href="#">Pricing</a></li>
                    </ul>
                </div>

                <!-- 2. RESEARCH -->
                <div class="footer-col">
                    <h4><i class="fas fa-book" style="font-size:10px; opacity:0.5; margin-right:5px;"></i> Research</h4>
                    <ul class="footer-links">
                        <li><a href="rwa.html">RWA & DeFi</a></li>
                        <li><a href="yield-mechanics.html">Yield Mechanics</a></li>
                        <li><a href="web3.html">Web3 Infrastructure</a></li>
                        <li><a href="ai-finance.html">AI & Finance</a></li>
                        <li><a href="governance.html">Governance</a></li>
                        <li><a href="legal-matrix.html">Global Matrix</a></li>
                        <li><a href="networks/index.html">Blockchain Networks</a></li>
                    </ul>
                </div>

                <!-- 3. INFRASTRUCTURE -->
                <div class="footer-col">
                    <h4><i class="fas fa-network-wired" style="font-size:10px; opacity:0.5; margin-right:5px;"></i> Infrastructure</h4>
                    <ul class="footer-links">
                        <li><a href="lifecycle.html">Cycle de Vie</a></li>
                        <li><a href="flux-comparison.html">Comparateur Flux</a></li>
                        <li><a href="legal_pilot.html">R√©gime Pilote (UE)</a></li>
                        <li><a href="sandbox.html">Sandbox</a></li>
                        <li><a href="#">SWIAT</a></li>
                        <li><a href="#">Canton Network</a></li>
                    </ul>
                </div>

                <!-- 4. CORPORATE -->
                <div class="footer-col">
                    <h4><i class="fas fa-building" style="font-size:10px; opacity:0.5; margin-right:5px;"></i> Corporate</h4>
                    <ul class="footer-links">
                        <li><a href="methodology.html">M√©thodologie</a></li>
                        <li><a href="guide.html">Documentation</a></li>
                        <li><a href="index-simple.html">Site Corporate</a></li>
                        <li><a href="#">√Ä propos</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>

                <!-- 5. LEGAL -->
                <div class="footer-col">
                    <h4><i class="fas fa-shield-alt" style="font-size:10px; opacity:0.5; margin-right:5px;"></i> Legal</h4>
                    <ul class="footer-links">
                        <li><a href="mentions-legales.html">Mentions L√©gales</a></li>
                        <li><a href="privacy.html">Politique de Confidentialit√©</a></li>
                        <li><a href="cgu.html">Conditions d'Utilisation</a></li>
                        <li><a href="cookies.html">Politique Cookies</a></li>
                        <li><a href="disclaimer.html">Disclaimer</a></li>
                        <li><a href="sitemap.xml">Sitemap</a></li>
                    </ul>
                </div>
            </div>
            <div style="margin-top: -20px; font-size: 11px; color: #64748b; line-height: 1.5; padding-bottom: 20px;">
                <strong>Disclaimer :</strong> Plateforme de d√©monstration √©ducative. Aucun conseil financier.
            </div>
        </div>

        <div class="footer-bottom">
            <div class="copyright">
                ¬© 2026 DCM Digital ‚Ä¢ Version 4.2.1
            </div>
            <div class="legal-links">
                <a href="#">Support IT</a>
                <a href="#">Documentation API</a>
            </div>
        </div>
    </footer>

    <!-- SCRIPTS -->
    <script defer src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({ duration: 800, once: true, offset: 100 });

        // --- GLOBAL CHART CONFIG ---
        Chart.defaults.color = '#94a3b8';
        Chart.defaults.borderColor = '#334155';
        let apyChartInstance = null;
        let yieldChartInstance = null;

        /* --- APR to APY CALCULATOR --- */
        function calcAPY() {
            const apr = parseFloat(document.getElementById('aprInput').value);
            const freq = parseFloat(document.getElementById('freqInput').value);

            if (!isNaN(apr) && !isNaN(freq)) {
                const r = apr / 100;
                const apy = (Math.pow((1 + r / freq), freq) - 1) * 100;
                const diff = apy - apr;

                document.getElementById('apyResult').innerText = apy.toFixed(2) + "%";

                const diffEl = document.getElementById('apyDiff');
                diffEl.innerText = "+" + diff.toFixed(2) + "%";
                diffEl.style.color = diff > 0.5 ? "var(--accent-green)" : "var(--text-muted)";

                updateAPYChart(apr, apy);
            }
        }

        function updateAPYChart(apr, apy) {
            const ctx = document.getElementById('apyChart').getContext('2d');

            // Generate data points for 12 months
            const labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const dataAPR = [];
            const dataAPY = [];

            for (let i = 0; i <= 12; i++) {
                dataAPR.push(100 * (1 + (apr / 100) * (i / 12))); // Simple interest linear
                dataAPY.push(100 * Math.pow((1 + apy / 100), i / 12)); // Compound interest exponential
            }

            if (apyChartInstance) {
                apyChartInstance.data.datasets[0].data = dataAPR;
                apyChartInstance.data.datasets[1].data = dataAPY;
                apyChartInstance.update();
            } else {
                apyChartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [
                            {
                                label: 'Int√©r√™t Simple (APR)',
                                data: dataAPR,
                                borderColor: '#3b82f6',
                                borderDash: [5, 5],
                                tension: 0.4
                            },
                            {
                                label: 'Int√©r√™t Compos√© (APY)',
                                data: dataAPY,
                                borderColor: '#10b981',
                                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                fill: true,
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' },
                            tooltip: { mode: 'index', intersect: false }
                        },
                        scales: {
                            y: { display: false }
                        }
                    }
                });
            }
        }
        /* --- REAL YIELD SIMULATOR --- */
        function calcRealYield() {
            const P = parseFloat(document.getElementById('principal').value);
            const APY = parseFloat(document.getElementById('apy').value);
            const Duration = parseFloat(document.getElementById('duration').value);
            const PriceChange = parseFloat(document.getElementById('priceChange').value);

            // Update UI displays
            document.getElementById('priceVal').innerText = (PriceChange > 0 ? "+" : "") + PriceChange + "%";
            document.getElementById('durationVal').innerText = Duration;

            // Logic:
            const tokensStart = P; // Assuming $1 = 1 Token for start
            // Tokens = P * (1 + APY/100)^Duration
            const tokensEnd = P * Math.pow((1 + APY / 100), Duration);
            const priceMultiplier = 1 * (1 + PriceChange / 100);
            const finalValue = tokensEnd * priceMultiplier;

            // Metrics
            const nominalGain = tokensEnd - P;
            const pnlPercent = ((finalValue - P) / P) * 100;

            // Formatting
            const formatter = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 });
            const numFormatter = new Intl.NumberFormat('en-US', { maximumFractionDigits: 0 });

            document.getElementById('finalValue').innerText = formatter.format(finalValue);
            document.getElementById('nominalGain').innerText = "+" + numFormatter.format(nominalGain) + " (Nominal)";

            const pnlEl = document.getElementById('netPnl');
            pnlEl.innerText = (pnlPercent > 0 ? "+" : "") + pnlPercent.toFixed(2) + "%";
            pnlEl.style.color = pnlPercent >= 0 ? "var(--accent-green)" : "var(--accent-red)";

            // Dynamic calc box border color
            const box = document.querySelector('#section-8 .calc-box');
            box.style.borderTopColor = pnlPercent >= 0 ? "var(--accent-green)" : "var(--accent-red)";

            updateYieldChart(P, finalValue, Duration, PriceChange);
        }

        function updateYieldChart(principal, finalValue, duration, priceChange) {
            const ctx = document.getElementById('yieldChart').getContext('2d');

            const isProfit = finalValue >= principal;
            const color = isProfit ? '#10b981' : '#ef4444';

            const labels = ['Investissement Initial', 'Valeur Finale (' + duration + ' ans)'];
            const data = [principal, finalValue];

            if (yieldChartInstance) {
                yieldChartInstance.data.labels = labels;
                yieldChartInstance.data.datasets[0].data = data;
                yieldChartInstance.data.datasets[0].backgroundColor = [
                    '#3b82f6', // Initial is always blue
                    color
                ];
                yieldChartInstance.update();
            } else {
                yieldChartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Valeur de Portefeuille ($)',
                            data: data,
                            backgroundColor: ['#3b82f6', color],
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: { beginAtZero: true, grid: { color: '#333' } }
                        }
                    }
                });
            }
        }

        // Initialize Calculators (and Charts)
        // Delay slightly to ensure canvas is ready
        setTimeout(() => {
            calcAPY();
            calcRealYield();
        }, 100);

        // Scroll Spy for TOC
        const sections = document.querySelectorAll('.section-box');
        const navLinks = document.querySelectorAll('.toc-link');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (pageYOffset >= (sectionTop - 200)) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link && link.getAttribute('href') && link.getAttribute('href').includes(current)) {
                    link.classList.add('active');
                }
            });
        });

        /* --- CORRELATION HEATMAP --- */
        function colorizeCorrelationMatrix() {
            const cells = document.querySelectorAll('.corr-val');
            cells.forEach(cell => {
                const val = parseFloat(cell.innerText);
                if (isNaN(val)) return;

                // Color Logic
                cell.style.color = "#fff";
                if (val >= 0.7) {
                    cell.style.backgroundColor = "rgba(16, 185, 129, 0.2)"; // Strong Green
                    cell.style.color = "var(--accent-green)";
                } else if (val >= 0.3) {
                    cell.style.backgroundColor = "rgba(16, 185, 129, 0.05)"; // Weak Green
                } else if (val <= -0.5) {
                    cell.style.backgroundColor = "rgba(239, 68, 68, 0.2)"; // Strong Red
                    cell.style.color = "var(--accent-red)";
                } else if (val < 0) {
                    cell.style.backgroundColor = "rgba(239, 68, 68, 0.05)"; // Weak Red
                }
            });
        }
        colorizeCorrelationMatrix();
    </script>

    <script src="search-engine.js"></script>
    <!-- AOS FIX -->
    <script defer src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            AOS.init({ duration: 800, once: true, offset: 50 });
        });
        setTimeout(function () {
            const hiddenElements = document.querySelectorAll('[data-aos]');
            hiddenElements.forEach(el => {
                if (getComputedStyle(el).opacity === '0') {
                    el.style.opacity = '1';
                    el.style.visibility = 'visible';
                }
            });
        }, 500);
    </script>
</body>

</html>