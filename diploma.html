<!DOCTYPE html>
<html lang="fr">

<head>
    <link rel="alternate" hreflang="fr" href="https://joanlabtest.github.io/Blockchain_Presentation/diploma.html">
    <link rel="alternate" hreflang="x-default"
        href="https://joanlabtest.github.io/Blockchain_Presentation/diploma.html">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCM Digital – Certificat de Maîtrise Blockchain</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Urbanist:wght@300;400;600;700&family=JetBrains+Mono:wght@400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --gold: #c9a84c;
            --gold-light: #f0c060;
            --dark: #08090d;
            --surface: #0d0f17;
            --border: rgba(201, 168, 76, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Urbanist', sans-serif;
            background: var(--dark);
            color: #e2d9c8;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
        }

        /* ===== CONTROL BAR (hidden on print) ===== */
        .control-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(8, 9, 13, 0.95);
            border-bottom: 1px solid rgba(201, 168, 76, 0.2);
            padding: 12px 30px;
            display: flex;
            justify-content: center;
            gap: 16px;
            z-index: 100;
        }

        .btn-gold {
            background: linear-gradient(135deg, #c9a84c, #f0c060);
            color: #08090d;
            border: none;
            padding: 10px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 700;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: opacity 0.2s;
        }

        .btn-gold:hover {
            opacity: 0.85;
        }

        .btn-ghost {
            background: transparent;
            color: #888;
            border: 1px solid #333;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: border-color 0.2s, color 0.2s;
        }

        .btn-ghost:hover {
            border-color: #c9a84c;
            color: #c9a84c;
        }

        .btn-linkedin {
            background: #0077b5;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 700;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: opacity 0.2s;
        }

        .btn-linkedin:hover {
            opacity: 0.85;
        }

        /* ===== DIPLOMA CARD ===== */
        .diploma-wrapper {
            margin-top: 80px;
            margin-bottom: 60px;
            padding: 20px;
            width: 100%;
            max-width: 860px;
        }

        .diploma {
            background: linear-gradient(160deg, #0d0f17 0%, #111520 100%);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 60px 70px;
            position: relative;
            overflow: hidden;
        }

        /* corner ornaments */
        .diploma::before,
        .diploma::after {
            content: '';
            position: absolute;
            width: 120px;
            height: 120px;
            border-color: var(--gold);
            border-style: solid;
            opacity: 0.25;
        }

        .diploma::before {
            top: 20px;
            left: 20px;
            border-width: 2px 0 0 2px;
            border-radius: 4px 0 0 0;
        }

        .diploma::after {
            bottom: 20px;
            right: 20px;
            border-width: 0 2px 2px 0;
            border-radius: 0 0 4px 0;
        }

        /* background glow */
        .diploma-glow {
            position: absolute;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(201, 168, 76, 0.06) 0%, transparent 70%);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }

        .diploma-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 50px;
        }

        .diploma-brand {
            font-size: 18px;
            font-weight: 800;
            color: var(--gold);
            letter-spacing: 3px;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .diploma-meta {
            text-align: right;
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            color: #555;
            line-height: 1.8;
        }

        /* divider */
        .gold-rule {
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
            margin: 20px 0;
            opacity: 0.4;
        }

        .diploma-pretext {
            text-align: center;
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 4px;
            margin-bottom: 16px;
        }

        .diploma-title {
            text-align: center;
            font-family: 'Cormorant Garamond', serif;
            font-size: 52px;
            font-weight: 700;
            color: white;
            line-height: 1.1;
            margin-bottom: 8px;
        }

        .diploma-subtitle {
            text-align: center;
            font-family: 'Cormorant Garamond', serif;
            font-size: 22px;
            font-style: italic;
            color: var(--gold-light);
            margin-bottom: 40px;
        }

        .recipient-section {
            text-align: center;
            margin: 36px 0;
        }

        .recipient-label {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 4px;
            color: #555;
            margin-bottom: 10px;
        }

        .recipient-name {
            font-family: 'Cormorant Garamond', serif;
            font-size: 44px;
            font-weight: 600;
            color: var(--gold-light);
            border-bottom: 1px solid rgba(201, 168, 76, 0.2);
            display: inline-block;
            padding-bottom: 8px;
            min-width: 280px;
        }

        .diploma-body {
            text-align: center;
            font-size: 14px;
            color: #888;
            line-height: 1.7;
            max-width: 580px;
            margin: 0 auto 40px;
        }

        /* score badges */
        .badge-row {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .badge {
            background: rgba(201, 168, 76, 0.07);
            border: 1px solid rgba(201, 168, 76, 0.2);
            border-radius: 10px;
            padding: 16px 24px;
            text-align: center;
            min-width: 130px;
        }

        .badge-num {
            font-family: 'JetBrains Mono', monospace;
            font-size: 28px;
            font-weight: 700;
            color: var(--gold-light);
        }

        .badge-label {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #666;
            margin-top: 4px;
        }

        /* signature row */
        .signature-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .sig-block {
            text-align: center;
        }

        .sig-line {
            width: 160px;
            height: 1px;
            background: rgba(201, 168, 76, 0.3);
            margin: 8px auto;
        }

        .sig-name {
            font-size: 13px;
            font-weight: 700;
            color: #e2d9c8;
        }

        .sig-title {
            font-size: 10px;
            color: #555;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .diploma-stamp {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            border: 2px solid rgba(201, 168, 76, 0.35);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--gold);
            text-align: center;
            line-height: 1.6;
        }

        .ver-hash {
            text-align: center;
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            color: #333;
            margin-top: 24px;
        }

        /* ===== PRINT STYLES ===== */
        @media print {
            body {
                background: white;
            }

            .control-bar {
                display: none;
            }

            .diploma-wrapper {
                margin-top: 0;
            }

            .diploma {
                background: white !important;
                border-color: #ccc;
            }

            .diploma-title,
            .recipient-name {
                color: #0d0f17 !important;
            }

            .diploma-subtitle {
                color: #8b7320 !important;
            }

            .badge-num {
                color: #8b7320 !important;
            }

            .diploma-brand {
                color: #8b7320 !important;
            }

            .diploma-body,
            .recipient-label,
            .badge-label {
                color: #555 !important;
            }

            .diploma-stamp {
                border-color: #8b7320 !important;
                color: #8b7320 !important;
            }

            .diploma-meta {
                color: #999 !important;
            }
        }
    </style>
</head>

<body>

    <!-- CONTROL BAR -->
    <div class="control-bar">
        <button class="btn-gold" onclick="window.print()">
            <i class="fas fa-file-pdf"></i> Télécharger en PDF
        </button>
        <button class="btn-linkedin" onclick="shareLinkedIn()">
            <i class="fab fa-linkedin"></i> Partager sur LinkedIn
        </button>
        <button class="btn-ghost" onclick="window.close()">
            <i class="fas fa-times"></i> Fermer
        </button>
    </div>

    <!-- DIPLOMA -->
    <div class="diploma-wrapper">
        <div class="diploma">
            <div class="diploma-glow"></div>

            <!-- HEADER -->
            <div class="diploma-header">
                <div class="diploma-brand">
                    <i class="fas fa-cube" style="font-size:20px;"></i>
                    DCM DIGITAL
                </div>
                <div class="diploma-meta">
                    <div>CERT. ID : <span id="cert-id">--</span></div>
                    <div>ÉMIS LE : <span id="cert-date">--</span></div>
                    <div>SYSTÈME : DCM_CERT_v1</div>
                </div>
            </div>

            <div class="gold-rule"></div>

            <!-- TITLE -->
            <div class="diploma-pretext">Atteste que</div>
            <div class="diploma-title">Certificat de<br>Maîtrise</div>
            <div class="diploma-subtitle">Digital Assets & Blockchain Finance</div>

            <!-- RECIPIENT -->
            <div class="recipient-section">
                <div class="recipient-label">Décerné à</div>
                <div class="recipient-name" id="recipient-name">—</div>
            </div>

            <!-- BODY TEXT -->
            <div class="diploma-body">
                a démontré une maîtrise approfondie des infrastructures blockchain, de la régulation MiCA,
                de la tokenisation d'actifs réels (RWA) et des mécanismes de Digital Bonds, au travers des
                évaluations théoriques et pratiques de la plateforme DCM Intelligence.
            </div>

            <!-- SCORE BADGES -->
            <div class="badge-row">
                <div class="badge">
                    <div class="badge-num" id="badge-score">—</div>
                    <div class="badge-label">Score Global</div>
                </div>
                <div class="badge">
                    <div class="badge-num" id="badge-level">—</div>
                    <div class="badge-label">Niveau Atteint</div>
                </div>
                <div class="badge">
                    <div class="badge-num" id="badge-modules">—</div>
                    <div class="badge-label">Modules Validés</div>
                </div>
            </div>

            <div class="gold-rule"></div>

            <!-- SIGNATURES -->
            <div class="signature-row">
                <div class="sig-block">
                    <div class="sig-line"></div>
                    <div class="sig-name">Joan Lyczak</div>
                    <div class="sig-title">Head of Blockchain Innovation</div>
                </div>

                <div class="diploma-stamp">
                    <i class="fas fa-check-circle" style="font-size:18px; margin-bottom:4px;"></i>
                    DCM<br>CERTIFIED<br>2026
                </div>

                <div class="sig-block">
                    <div class="sig-line"></div>
                    <div class="sig-name">DCM Intelligence</div>
                    <div class="sig-title">Plateforme Agréée</div>
                </div>
            </div>

            <!-- VERIFICATION HASH -->
            <div class="ver-hash" id="ver-hash">HASH : DCM-VERIFYING...</div>
        </div>
    </div>

    <script>
        // Pull data from localStorage (populated by quiz engine and session manager)
        const quizHistory = JSON.parse(localStorage.getItem('dcm_quiz_history') || '[]');
        const userProfile = JSON.parse(localStorage.getItem('dcm_user_profile') || '{}');

        const name = userProfile.name || userProfile.email || 'Participant';
        const email = userProfile.email || '';
        const now = new Date();
        const dateStr = now.toLocaleDateString('fr-FR', { day: '2-digit', month: 'long', year: 'numeric' });

        // Compute score
        let totalPct = 0, count = 0, passed = 0;
        quizHistory.forEach(entry => {
            const pct = Math.round((entry.score / entry.total) * 100);
            totalPct += pct;
            count++;
            if (pct >= 80) passed++;
        });
        const avg = count > 0 ? Math.round(totalPct / count) : 85; // fallback demo

        // Level
        const level = avg >= 90 ? 'Expert' : avg >= 75 ? 'Avancé' : avg >= 60 ? 'Intermédiaire' : 'Fondamentaux';

        // Cert ID & hash
        const rawHash = btoa((email + dateStr).slice(0, 16)).replace(/[^A-Z0-9]/gi, '').toUpperCase().slice(0, 12);
        const certId = 'DCM-' + rawHash;

        // Populate
        document.getElementById('cert-id').textContent = certId;
        document.getElementById('cert-date').textContent = dateStr;
        document.getElementById('recipient-name').textContent = name;
        document.getElementById('badge-score').textContent = (count > 0 ? avg : '—') + (count > 0 ? '%' : '');
        document.getElementById('badge-level').textContent = level;
        document.getElementById('badge-modules').textContent = (count > 0 ? passed : '3') + '/3';
        document.getElementById('ver-hash').textContent = 'ID VERIF : ' + certId + ' • blockchain.dcm-digital.io/verify';

        // LinkedIn Share
        function shareLinkedIn() {
            const text = encodeURIComponent(
                `Je viens d'obtenir mon Certificat de Maitrise en Digital Assets & Blockchain Finance sur DCM Intelligence !\n` +
                `Score : ${avg}% — Niveau : ${level}\n` +
                `Cert ID : ${certId}\n` +
                `#Blockchain #DigitalBonds #RWA #MiCA #Finance`
            );
            const url = encodeURIComponent('https://joanlabtest.github.io/Blockchain_Presentation/diploma.html');
            window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${url}&summary=${text}`, '_blank');
        }

        window.shareLinkedIn = shareLinkedIn;
    </script>
</body>

</html>